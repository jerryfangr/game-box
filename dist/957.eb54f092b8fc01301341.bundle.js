(self.webpackChunkgame_box=self.webpackChunkgame_box||[]).push([[957],{4957:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return l}}),i(8304);var n,o=i(3919),s=i(7754),r={bg:{width:436,height:416,texture:{default:{sx:0,sy:0,sWidth:767,sHeight:767}}},ground:{width:536,height:15,texture:{default:{sx:0,sy:768,sWidth:457,sHeight:22}}},pipe:{width:78,height:446,texture:{default:{sx:768,sy:0,sWidth:134,sHeight:768}}},bird:{width:50,height:36,texture:{default:{sx:902,sy:0,sWidth:120,sHeight:85},fly1:{sx:902,sy:0,sWidth:120,sHeight:85},fly2:{sx:902,sy:85,sWidth:120,sHeight:85},fly3:{sx:902,sy:170,sWidth:120,sHeight:85}}},error:{width:78,height:446,texture:{default:{sx:916,sy:386,sWidth:51,sHeight:93}}}},h=function(t){var e=r[t]||r.error;return JSON.parse(JSON.stringify(e))},u=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),p=function(t){function e(e,i){var n=t.call(this,i)||this,o=n.formatOption(h("bg")),r=n.formatOption(h("ground"));return r.y=o.height-r.height+5,n.bgElement=new s.Kn(e,o),n.groundElement=new s.Kn(e,r),n.width=n.bgElement.width,n.isPlaying=!1,n}return u(e,t),e.prototype.formatOption=function(t){return{x:this.x,y:this.y,width:t.width,height:t.height,sx:t.texture.default.sx,sy:t.texture.default.sy,sWidth:t.texture.default.sWidth,sHeight:t.texture.default.sHeight}},e.prototype.render=function(){this.bgElement.render(),this.groundElement.render()},e.prototype.toggle=function(t){this.isPlaying=void 0!==t?t:!this.isPlaying},e.prototype.update=function(){this.isPlaying&&(this.groundElement.x-=4,this.groundElement.x+this.groundElement.width<this.bgElement.width&&(this.groundElement.x=0))},e}(s.Ap),a=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d=function(t){function e(e,i){var n=this,o=h("bird");return(n=t.call(this,i)||this).options=i,n.texture=e,n.width=n.width||o.width,n.height=n.height||o.height,n.element=new s.Kn(n.texture,i),n.elements=[],n.activeIndex=0,n.status="waitting",n.score=0,n.speed=i.speed||8,n.acceleration=2,n.updateCounter=0,n.init(o.texture),n}return a(e,t),e.prototype.init=function(t){for(var e in t){var i=this.formatOption(t[e]);this.elements.push(new s.Kn(this.texture,i))}},e.prototype.setCoordinates=function(e,i){t.prototype.setCoordinates.call(this,e,i),this.element.setCoordinates(e,i)},e.prototype.formatOption=function(t){return{x:this.x,y:this.y,width:this.width,height:this.height,sx:t.sx,sy:t.sy,sWidth:t.sWidth,sHeight:t.sHeight}},e.prototype.fly=function(){this.setStatus("flying");var t=this.y-this.speed;t<0&&(t=0),this.setCoordinates(void 0,t)},e.prototype.drop=function(){var t=this.y-this.speed;t+this.height>this.engine.height-20&&(t=this.engine.height-20-this.height),this.setCoordinates(void 0,t),this.speed-=this.acceleration},e.prototype.reset=function(){this.setStatus("waitting"),this.setCoordinates(this.options.x,this.options.y)},e.prototype.setStatus=function(t){this.status!==t&&(this.speed=this.options.speed||8,"dropping"===t&&(this.speed=-4),this.status=t)},Object.defineProperty(e.prototype,"position",{get:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},enumerable:!1,configurable:!0}),e.prototype.render=function(){"waitting"===this.status?this.element.render():"flying"===this.status?this.element.rotateRender(-45):this.element.rotateRender(45)},e.prototype.update=function(){"dropping"===this.status&&this.drop(),this.updateCounter++,this.updateCounter>=2&&(this.updateCounter=0,this.activeIndex++,this.activeIndex=this.activeIndex>=this.elements.length?0:this.activeIndex,this.element=this.elements[this.activeIndex],this.setCoordinates(this.x,this.y))},e}(s.Ap),c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=function(t){function e(e){var i=t.call(this)||this;return i.x=e.x||0,i.y=e.y||0,i.width=e.width||0,i.height=e.height||0,i.init(),i}return c(e,t),e.prototype.init=function(){this.initBackground(),this.initScore()},e.prototype.initBackground=function(){var t={x:this.x,y:this.y,width:this.width,height:this.height,style:"#DDD894",type:"fill"};this.addElement(new s.ev(t));var e={x:this.x+4,y:this.y,width:this.width-5,height:this.height-2,style:"#4B3C47",type:"stroke",lineWidth:10};this.addElement(new s.ev(e))},e.prototype.initScore=function(){},e}(s.oJ),f=function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l=function(t){function e(){var e=t.call(this)||this;return e.texture=new Image,e.status="wait",e.gameElements=[],e.loadTexture((function(){e.init(),e.bindInputEvents()})),e}return f(e,t),e.prototype.init=function(){this.initBackground(),this.initPlayer(),this.initPanel()},e.prototype.loadTexture=function(t){var e=this;this.texture.src=o,this.texture.onload=function(){t.call(e)}},e.prototype.initBackground=function(){this.bg=new p(this.texture,{x:0,y:0}),this.addElement(this.bg)},e.prototype.initPlayer=function(){this.player=new d(this.texture,{x:100,y:230}),this.addElement(this.player)},e.prototype.initPanel=function(){var t=new y({x:this.bg.width,y:0,width:this.engine.width-this.bg.width,height:this.engine.height});this.addElement(t)},e.prototype.bindInputEvents=function(){var e=this;t.prototype.bindInputEvents.call(this),this.engine.bindEvent("j",(function(t){"down"===t?(e.bg.toggle(!0),e.player.fly()):e.player.setStatus("dropping")})),this.engine.bindEvent("k",(function(t){}))},e}(s.oJ)},3919:function(t,e,i){"use strict";t.exports=i.p+"2cdd2fad42051e344158.png"}}]);