!function(){"use strict";var t,e,n={1348:function(t,e,n){var i=n(8855);n(1539),n(8674);var o,r=document.querySelector("#canvas"),s=i.D4.getInstance(r,30);null===(o=function(t){switch(t){case"tower":return Promise.all([n.e(335),n.e(722)]).then(n.bind(n,9722)).then((function(t){return t.StartScene,new(0,t.GameScene)}),(function(t){throw new Error("An error occurred while loading the tower game")}));default:throw new Error("game "+t+" is not exist")}}("tower"))||void 0===o||o.then((function(t){s.startWith(t)}),(function(t){console.log(t)}))},8855:function(t,e,n){n.d(e,{D4:function(){return r},Ap:function(){return s},oJ:function(){return h},yL:function(){return c},Kn:function(){return d},zo:function(){return a},ev:function(){return l}}),n(4916),n(5306),n(2564),n(9554),n(2772),n(561),n(4747);var i,o=function(){function t(){this.inputs={},this.events={},this.init()}return t.prototype.init=function(){this.listenInputs()},t.prototype.listenInputs=function(){var t=this;window.addEventListener("keydown",(function(e){var n=" "===e.key?"SPACE":e.key.toUpperCase();t.inputs[n]=["down",e]})),window.addEventListener("keyup",(function(e){var n=" "===e.key?"SPACE":e.key.toUpperCase();t.inputs[n]=["up",e]})),window.addEventListener("mousedown",(function(e){t.inputs.MOUSE=["down",e]})),window.addEventListener("mouseup",(function(e){t.inputs.MOUSE=["up",e]}))},t.prototype.bindEvent=function(t,e,n){t=t.toUpperCase();var i=e;return void 0!==n&&(i=function(t,e){var n=!0;return function(){var i=arguments;n&&(n=!1,t.apply(void 0,i),setTimeout((function(){n=!0}),e))}}(e,n)),this.events[t]=this.events[t]||[],this.events[t].push(i),i},t.prototype.cancelEvent=function(t,e){var n;t=t.toUpperCase();var i=null===(n=this.events[t])||void 0===n?void 0:n.indexOf(e);i&&-1!==i&&this.events[t].splice(i)},t.prototype.emitEvent=function(t){if(void 0!==this.events[t]){var e=this.inputs[t][0],n=this.inputs[t][1];this.events[t].forEach((function(t){t(e,n)})),"up"===e&&(this.inputs[t]=void 0)}},t.prototype.emitEvents=function(){for(var t in this.inputs)void 0!==this.inputs[t]&&this.emitEvent(t)},t.prototype.clear=function(){this.inputs={},this.events={}},t}(),r=function(){function t(t,e){void 0===e&&(e=60),this.canvas=t,this.ctx=t.getContext("2d"),this.maxFps=e,this._listener=new o,this._pause=!1,this._scene={},this._listenInput=!0}return t.getInstance=function(t,e){if(this.instance)return this.instance;if(!this.instance&&t)return this.instance=new this(t,e);throw new Error("You have to create at least one instance")},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},enumerable:!1,configurable:!0}),t.prototype.bindEvent=function(t,e,n){return this._listener.bindEvent(t,e,n)},t.prototype.cancelEvent=function(t,e){this._listener.cancelEvent(t,e)},t.prototype.clearEvents=function(){this._listener.clear()},t.prototype.clearScreen=function(){this.ctx.clearRect(0,0,this.width,this.height)},t.prototype._render=function(){var t,e;null===(e=(t=this._scene).render)||void 0===e||e.call(t)},t.prototype._update=function(){var t,e;null===(e=(t=this._scene).update)||void 0===e||e.call(t)},t.prototype._run=function(){var t=this;this._pause||(this.clearScreen(),this._listenInput&&this._listener.emitEvents(),this._render(),this._update()),setTimeout((function(){t._run()}),1e3/this.maxFps)},t.prototype.togglePause=function(t){this._pause=void 0!==t?t:!this._pause},t.prototype.toggleListener=function(t){this._listenInput=void 0!==t?t:!this._listenInput},t.prototype.bindPause=function(t){var e=this;window.addEventListener("keydown",(function(n){n.key===t&&e.togglePause()}))},t.prototype.startWith=function(t){this._scene=t,this._scene.bindInputEvents(),this._run()},t.prototype.replace=function(t){this._scene=t,this.clearEvents(),this._scene.bindInputEvents()},t}(),s=function(){function t(t){this.engine=r.getInstance(),this.isDead=!1,this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0}return t.prototype.delete=function(){this.isDead=!0},t.prototype.setCoordinates=function(t,e){this.x=void 0===t?this.x:t,this.y=void 0===e?this.y:e},t.prototype.move=function(t,e){this.x+=void 0===t?0:t,this.y+=void 0===e?0:e},t.prototype.render=function(){},t.prototype.update=function(){},t}(),h=function(){function t(){this.engine=r.getInstance(),this.isDead=!1,this.elements=[]}return t.prototype.addElement=function(t){this.elements.push(t)},t.prototype.addElements=function(t){var e=this;t.forEach((function(t){e.addElement(t)}))},t.prototype.removeElement=function(t){var e,n=this.elements.indexOf(t);-1!==n&&(this.elements.splice(n,1),null===(e=this.deleteElementCallback)||void 0===e||e.call(this,t))},t.prototype.removeElements=function(t){var e=this;t.length>0&&t.forEach((function(t){e.removeElement(t)}))},t.prototype.resetElement=function(){this.elements=[]},t.prototype.deleteElementCallback=function(t){},t.prototype.bindInputEvents=function(){this.engine.bindPause("p")},t.prototype.delete=function(){this.isDead=!0},t.prototype.render=function(){var t=this;this.elements.forEach((function(e){t.engine.ctx.save(),e.render(),t.engine.ctx.restore()}))},t.prototype.update=function(){var t=[];this.elements.forEach((function(e){!0!==e.isDead?e.update():t.push(e)})),this.removeElements(t)},t}(),u=(n(8304),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=t.call(this,e)||this;return n.text=e.text,n.font=e.font||"16px Microsoft YaHei",n.type=e.type||"fill",n.style=e.style||"#000",n}return u(e,t),e.prototype.changeTexture=function(t,e,n){this.text=void 0===t?this.text:t,this.engine.ctx.font=e||this.engine.ctx.font,this.style=n||this.style},e.prototype.render=function(){this.engine.ctx.font=this.font,"fill"===this.type?(this.engine.ctx.fillStyle=this.style,this.engine.ctx.fillText(this.text,this.x,this.y)):(this.engine.ctx.strokeStyle=this.style,this.engine.ctx.strokeText(this.text,this.x,this.y))},e}(s),a=(n(3290),function(){function t(t){this.engine=r.getInstance(),this.hasDraw=!1,this.isDead=!1,this.lineWidth=t.lineWidth||2,this.type=t.type||"fill",this.style=t.style||"#000",this.drawCallback=function(){}}return t.prototype.changeStyle=function(t,e){this.style=t||this.style,this.lineWidth=e||this.lineWidth},t.prototype.draw=function(t){this.hasDraw=!0,this.drawCallback=t},t.prototype.render=function(){this.hasDraw&&(this.engine.ctx.beginPath(),this.drawCallback.call(this,this.engine.ctx),this.engine.ctx.lineWidth=this.lineWidth,"fill"===this.type?(this.engine.ctx.fillStyle=this.style,this.engine.ctx.fill()):(this.engine.ctx.strokeStyle=this.style,this.engine.ctx.stroke()),this.engine.ctx.closePath())},t.prototype.update=function(){},t}()),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),l=function(t){function e(e){var n=t.call(this,e)||this;if(n.width=e.width||n.engine.width,n.height=e.height||n.engine.height,n.radius=e.radius||0,n.lineWidth=e.lineWidth||1,n.type=e.type||"stroke",n.style=e.style||"#000",2*n.radius>n.width||2*n.radius>n.height)throw new Error("radius is too big, the diameter should small than width and height");return n.pen=new a({lineWidth:n.lineWidth,type:n.type,style:n.style}),n.draw(),n}return p(e,t),e.prototype.changeStyle=function(t,e){this.style=t||this.style,this.lineWidth=e||this.lineWidth,this.pen.changeStyle(this.style,this.lineWidth)},e.prototype.draw=function(){var t=this;this.pen.draw((function(e){var n=t.x+t.radius,i=t.y+t.radius,o=t.x+t.width-t.radius,r=t.y+t.height-t.radius;e.moveTo(t.x,i),e.arc(n,i,t.radius,Math.PI,3*Math.PI/2),e.lineTo(n,t.y),e.arc(o,i,t.radius,3*Math.PI/2,2*Math.PI),e.lineTo(t.x+t.width,r),e.arc(o,r,t.radius,0,Math.PI/2),e.lineTo(n,t.y+t.height),e.arc(n,r,t.radius,Math.PI/2,Math.PI),e.lineTo(t.x,i)}))},e.prototype.render=function(){this.pen.render()},e}(s),f=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),d=function(t){function e(e,n){var i=t.call(this,n)||this;return i.image=e,i.sx=n.sx||0,i.sy=n.sy||0,i.sWidth=n.sWidth||i.image.width,i.sHeight=n.sHeight||i.image.height,i.width=i.width||i.sWidth,i.height=i.height||i.sHeight,i}return f(e,t),e.prototype.changeTexture=function(t,e,n,i){this.sx=t||this.sx,this.sy=e||this.sy,void 0!==n&&(this.sWidth=n||this.sWidth,this.sHeight=i||this.sHeight)},e.prototype.render=function(){this.engine.ctx.drawImage(this.image,this.sx,this.sy,this.sWidth,this.sHeight,this.x,this.y,this.width,this.height)},e}(s)}},i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={exports:{}};return n[t](e,e.exports,o),e.exports}o.m=n,o.x=function(){},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,n){return o.f[n](t,e),e}),[]))},o.u=function(t){return t+"."+{335:"06997a8ce46e179eb78c",722:"45125e20086aefe87c2f"}[t]+".bundle.js"},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t={},e="game-box:",o.l=function(n,i,r,s){if(t[n])t[n].push(i);else{var h,u;if(void 0!==r)for(var c=document.getElementsByTagName("script"),a=0;a<c.length;a++){var p=c[a];if(p.getAttribute("src")==n||p.getAttribute("data-webpack")==e+r){h=p;break}}h||(u=!0,(h=document.createElement("script")).charset="utf-8",h.timeout=120,o.nc&&h.setAttribute("nonce",o.nc),h.setAttribute("data-webpack",e+r),h.src=n),t[n]=[i];var l=function(e,i){h.onerror=h.onload=null,clearTimeout(f);var o=t[n];if(delete t[n],h.parentNode&&h.parentNode.removeChild(h),o&&o.forEach((function(t){return t(i)})),e)return e(i)},f=setTimeout(l.bind(null,void 0,{type:"timeout",target:h}),12e4);h.onerror=l.bind(null,h.onerror),h.onload=l.bind(null,h.onload),u&&document.head.appendChild(h)}},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},function(){var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t}(),function(){var t={179:0},e=[[1348,866]];o.f.j=function(e,n){var i=o.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise((function(n,o){i=t[e]=[n,o]}));n.push(i[2]=r);var s=o.p+o.u(e),h=new Error;o.l(s,(function(n){if(o.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;h.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",h.name="ChunkLoadError",h.type=r,h.request=s,i[1](h)}}),"chunk-"+e,e)}};var n=function(){},i=function(i,r){for(var s,h,[u,c,a,p]=r,l=0,f=[];l<u.length;l++)h=u[l],o.o(t,h)&&t[h]&&f.push(t[h][0]),t[h]=0;for(s in c)o.o(c,s)&&(o.m[s]=c[s]);for(a&&a(o),i&&i(r);f.length;)f.shift()();return p&&e.push.apply(e,p),n()},r=self.webpackChunkgame_box=self.webpackChunkgame_box||[];function s(){for(var n,i=0;i<e.length;i++){for(var r=e[i],s=!0,h=1;h<r.length;h++){var u=r[h];0!==t[u]&&(s=!1)}s&&(e.splice(i--,1),n=o(o.s=r[0]))}return 0===e.length&&(o.x(),o.x=function(){}),n}r.forEach(i.bind(null,0)),r.push=i.bind(null,r.push.bind(r));var h=o.x;o.x=function(){return o.x=h||function(){},(n=s)()}}(),o.x()}();